
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../system_overview/">
      
      
        <link rel="next" href="../collections_api/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.8">
    
    
      
        <title>Adding DJ Software Support to the Collections Package - DJ Tools</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.ded33207.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adding-dj-software-support-to-the-collections-package" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DJ Tools" class="md-header__button md-logo" aria-label="DJ Tools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DJ Tools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Adding DJ Software Support to the Collections Package
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/a-rich/DJ-Tools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DJ Tools" class="md-nav__button md-logo" aria-label="DJ Tools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DJ Tools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/a-rich/DJ-Tools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/setup/" class="md-nav__link">
        Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Developer Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Developer Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../system_overview/" class="md-nav__link">
        System Overview
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Adding DJ Software Support to the Collections Package
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Adding DJ Software Support to the Collections Package
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collections" class="md-nav__link">
    Collections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.serialize" class="md-nav__link">
    serialize
  </a>
  
    <nav class="md-nav" aria-label="serialize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appending-a-playlist-object-to-the-root-playlist" class="md-nav__link">
    Appending a Playlist object to the root Playlist:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.add_playlist" class="md-nav__link">
    add_playlist
  </a>
  
    <nav class="md-nav" aria-label="add_playlist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-root-playlist-or-if-a-name-is-provided-the-list-of-playlist-objects-with-matching-names-supports-fuzzy-matching-with-the-glob-parameter" class="md-nav__link">
    Getting the root Playlist or, if a name is provided, the list of Playlist objects with matching names (supports fuzzy matching with the glob parameter):
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.get_playlists" class="md-nav__link">
    get_playlists
  </a>
  
    <nav class="md-nav" aria-label="get_playlists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-dictionary-mapping-track-ids-to-track-objects" class="md-nav__link">
    Getting the dictionary mapping track IDs to Track objects:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.get_tracks" class="md-nav__link">
    get_tracks
  </a>
  
    <nav class="md-nav" aria-label="get_tracks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-the-dictionary-mapping-track-ids-to-track-objects" class="md-nav__link">
    Set the dictionary mapping track IDs to Track objects:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.set_tracks" class="md-nav__link">
    set_tracks
  </a>
  
    <nav class="md-nav" aria-label="set_tracks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-a-dictionary-with-the-sorted-set-of-genre-tags-and-non-genre-tags" class="md-nav__link">
    Get a dictionary with the sorted set of genre tags and non-genre tags:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.get_all_tags" class="md-nav__link">
    get_all_tags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracks" class="md-nav__link">
    Tracks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.Track.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.Track.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.Track" class="md-nav__link">
    Track
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playlists" class="md-nav__link">
    Playlists
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.get_name" class="md-nav__link">
    get_name
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.is_folder" class="md-nav__link">
    is_folder
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.new_playlist" class="md-nav__link">
    new_playlist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    Appendix
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordbox-as-an-example" class="md-nav__link">
    Rekordbox as an example
  </a>
  
    <nav class="md-nav" aria-label="Rekordbox as an example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordboxcollection" class="md-nav__link">
    RekordboxCollection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.RekordboxCollection.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.RekordboxCollection.serialize" class="md-nav__link">
    serialize
  </a>
  
    <nav class="md-nav" aria-label="serialize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordboxtrack" class="md-nav__link">
    RekordboxTrack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.RekordboxTrack.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.RekordboxTrack.serialize" class="md-nav__link">
    serialize
  </a>
  
    <nav class="md-nav" aria-label="serialize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordboxplaylist" class="md-nav__link">
    RekordboxPlaylist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.RekordboxPlaylist.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.RekordboxPlaylist.new_playlist" class="md-nav__link">
    new_playlist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.RekordboxPlaylist.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../collections_api/" class="md-nav__link">
        Using the Collections API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../playlist_filters/" class="md-nav__link">
        Adding Custom PlaylistFilters
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          How-to Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          How-to Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Collection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Collection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/collection_playlists/" class="md-nav__link">
        Build Playlists From Tags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/combiner_playlists/" class="md-nav__link">
        Combine Playlists With Boolean Algebra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/copy_playlists/" class="md-nav__link">
        Copy Tracks From Playlists
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/shuffle_playlists/" class="md-nav__link">
        Shuffle Tracks in Playlists
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Spotify
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Spotify
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/reddit_spotify_api_access/" class="md-nav__link">
        Setup Reddit & Spotify API Access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/spotify_playlist_from_upload/" class="md-nav__link">
        Create Spotify Playlists From Other Users' Uploads
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/spotify_playlist_from_reddit/" class="md-nav__link">
        Create Spotify Playlists From Reddit Posts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Sync
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Sync
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/setup_object_storage/" class="md-nav__link">
        Setup Object Storage For Syncing Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/sync_beatcloud/" class="md-nav__link">
        Sync Files with the Beatcloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/sync_spotify/" class="md-nav__link">
        Sync Tracks From Spotify Playlists
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/check_beatcloud/" class="md-nav__link">
        Check the Beatcloud for Tracks in Spotify Playlists or Local Directories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/extract_from_url/" class="md-nav__link">
        Extract Audio Files From URLs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/process_recordings/" class="md-nav__link">
        Process Recorded Files Using Spotify Playlists
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../how_to_guides/standardize_audio/" class="md-nav__link">
        Standardize Audio Files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Conceptual Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Conceptual Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../conceptual_guides/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../conceptual_guides/rekordbox_collection/" class="md-nav__link">
        Get to Know Your Rekordbox Collection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../conceptual_guides/file_standardization/" class="md-nav__link">
        The Importance of Standardization and Quality Control
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/configs/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/collection/" class="md-nav__link">
        Collection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/spotify/" class="md-nav__link">
        Spotify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/sync/" class="md-nav__link">
        Sync
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collections" class="md-nav__link">
    Collections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.serialize" class="md-nav__link">
    serialize
  </a>
  
    <nav class="md-nav" aria-label="serialize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appending-a-playlist-object-to-the-root-playlist" class="md-nav__link">
    Appending a Playlist object to the root Playlist:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.add_playlist" class="md-nav__link">
    add_playlist
  </a>
  
    <nav class="md-nav" aria-label="add_playlist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-root-playlist-or-if-a-name-is-provided-the-list-of-playlist-objects-with-matching-names-supports-fuzzy-matching-with-the-glob-parameter" class="md-nav__link">
    Getting the root Playlist or, if a name is provided, the list of Playlist objects with matching names (supports fuzzy matching with the glob parameter):
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.get_playlists" class="md-nav__link">
    get_playlists
  </a>
  
    <nav class="md-nav" aria-label="get_playlists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-dictionary-mapping-track-ids-to-track-objects" class="md-nav__link">
    Getting the dictionary mapping track IDs to Track objects:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.get_tracks" class="md-nav__link">
    get_tracks
  </a>
  
    <nav class="md-nav" aria-label="get_tracks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-the-dictionary-mapping-track-ids-to-track-objects" class="md-nav__link">
    Set the dictionary mapping track IDs to Track objects:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.set_tracks" class="md-nav__link">
    set_tracks
  </a>
  
    <nav class="md-nav" aria-label="set_tracks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-a-dictionary-with-the-sorted-set-of-genre-tags-and-non-genre-tags" class="md-nav__link">
    Get a dictionary with the sorted set of genre tags and non-genre tags:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.Collection.get_all_tags" class="md-nav__link">
    get_all_tags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracks" class="md-nav__link">
    Tracks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.Track.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.Track.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.Track" class="md-nav__link">
    Track
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playlists" class="md-nav__link">
    Playlists
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.get_name" class="md-nav__link">
    get_name
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.is_folder" class="md-nav__link">
    is_folder
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.Playlist.new_playlist" class="md-nav__link">
    new_playlist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    Appendix
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordbox-as-an-example" class="md-nav__link">
    Rekordbox as an example
  </a>
  
    <nav class="md-nav" aria-label="Rekordbox as an example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordboxcollection" class="md-nav__link">
    RekordboxCollection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.RekordboxCollection.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.collections.RekordboxCollection.serialize" class="md-nav__link">
    serialize
  </a>
  
    <nav class="md-nav" aria-label="serialize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordboxtrack" class="md-nav__link">
    RekordboxTrack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.RekordboxTrack.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.tracks.RekordboxTrack.serialize" class="md-nav__link">
    serialize
  </a>
  
    <nav class="md-nav" aria-label="serialize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rekordboxplaylist" class="md-nav__link">
    RekordboxPlaylist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.RekordboxPlaylist.__init__" class="md-nav__link">
    __init__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.RekordboxPlaylist.new_playlist" class="md-nav__link">
    new_playlist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.collection.playlists.RekordboxPlaylist.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="adding-dj-software-support-to-the-collections-package">Adding DJ Software Support to the Collections Package</h1>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#collections">Collections</a></li>
<li><a href="#tracks">Tracks</a></li>
<li><a href="#playlists">Playlists</a></li>
<li><a href="#rekordbox-as-an-example">Appendix: Rekordbox as an example</a><ul>
<li><a href="#rekordboxcollection">RekordboxCollection</a></li>
<li><a href="#rekordboxtrack">RekordboxTrack</a></li>
<li><a href="#rekordboxplaylist">RekordboxPlaylist</a></li>
</ul>
</li>
</ul>
<h2 id="overview">Overview</h2>
<p>The <code>collection</code> package is designed to work with any serialized DJ collection that contains all the information about tracks and playlists.
Each of these three components, <code>Collection</code>, <code>Playlist</code>, and <code>Track</code>, has an interface with which <code>djtools</code> uses to implement <a href="../../../how_to_guides/#collection">these features</a>.</p>
<p>In order to extend <code>djtools</code> so that these features can be used for other DJ platforms (Denon, Serato, Traktor, Virtual DJ, etc.), these three components must be subclassed to implement several abstract methods. </p>
<h2 id="collections">Collections</h2>
<p>Every <code>Collection</code> subclass must implement an <code>__init__</code> that accepts a <code>pathlib.Path</code> (and also <code>str</code> if you decorate it with <code>@make_path</code>).
The <code>__init__</code> must deserialize the <code>Track</code> and <code>Playlist</code> data under the <code>Path</code> to create a <code>Collection</code> object.</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.__init__"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserializes a collection from the native format of a DJ software.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to a serialized collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>The other method a <code>Collection</code> must implement is <code>serialize</code> which will write the <code>Collection</code> data in whatever format is native for that DJ platform and return the <code>Path</code> to it.</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.serialize"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize a collection into the native format of a DJ software.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A path to a serialized collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><hr />
<p>Subclasses of <code>Collection</code> inherit a few methods necessary to execute on the <code>djtools</code> feature set:</p>
<h6 id="appending-a-playlist-object-to-the-root-playlist">Appending a <code>Playlist</code> object to the root <code>Playlist</code>:</h6>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.add_playlist"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_playlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">playlist</span><span class="p">:</span> <span class="n">Playlist</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Appends a playlist to the collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        playlist: Playlist to append to the collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span><span class="o">.</span><span class="n">add_playlist</span><span class="p">(</span><span class="n">playlist</span><span class="p">)</span>  <span class="c1"># pylint:disable=no-member</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h6 id="getting-the-root-playlist-or-if-a-name-is-provided-the-list-of-playlist-objects-with-matching-names-supports-fuzzy-matching-with-the-glob-parameter">Getting the root <code>Playlist</code> or, if a <code>name</code> is provided, the list of <code>Playlist</code> objects with matching names (supports fuzzy matching with the <code>glob</code> parameter):</h6>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.get_playlists"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_playlists</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">glob</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Playlist</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Playlist</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns Playlists with a matching name.</span>

<span class="sd">    If no playlist name is provided, then the root playlist is returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: Name of the Playlists to return.</span>
<span class="sd">        glob: Glob on playlist name containing &quot;*&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Playlists with the same name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span>  <span class="c1"># pylint:disable=no-member</span>

    <span class="n">exp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)))</span>
    <span class="n">playlists</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">playlist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span><span class="p">:</span>  <span class="c1"># pylint:disable=no-member</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">glob</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">playlist</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span> <span class="ow">or</span>
            <span class="p">(</span><span class="ow">not</span> <span class="n">glob</span> <span class="ow">and</span> <span class="n">playlist</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">playlists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">playlist</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">playlist</span><span class="o">.</span><span class="n">is_folder</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">playlist</span> <span class="ow">in</span> <span class="n">playlist</span><span class="p">:</span>
                <span class="n">playlists</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">playlist</span><span class="o">.</span><span class="n">get_playlists</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">glob</span><span class="o">=</span><span class="n">glob</span><span class="p">))</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">playlist</span> <span class="k">for</span> <span class="n">playlist</span> <span class="ow">in</span> <span class="n">playlists</span> <span class="k">if</span> <span class="n">playlist</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h6 id="getting-the-dictionary-mapping-track-ids-to-track-objects">Getting the dictionary mapping track IDs to <code>Track</code> objects:</h6>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.get_tracks"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_tracks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Track</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the tracks in the collection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict of tracks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h6 id="set-the-dictionary-mapping-track-ids-to-track-objects">Set the dictionary mapping track IDs to <code>Track</code> objects:</h6>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.set_tracks"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_tracks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tracks</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Track</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the tracks of this collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        tracks: Tracks to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span> <span class="o">=</span> <span class="n">tracks</span>  <span class="c1"># pylint:disable=attribute-defined-outside-init</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h6 id="get-a-dictionary-with-the-sorted-set-of-genre-tags-and-non-genre-tags">Get a dictionary with the sorted set of genre tags and non-genre tags:</h6>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.Collection.get_all_tags"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the all tags in the collection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict containing all track tags keyed by &quot;genres&quot; and &quot;other&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">all_tags</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">tag</span> <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tracks</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">track</span><span class="o">.</span><span class="n">get_tags</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="n">genre_tags</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">tag</span> <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tracks</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">track</span><span class="o">.</span><span class="n">get_genre_tags</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="n">other_tags</span> <span class="o">=</span> <span class="n">all_tags</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">genre_tags</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;genres&quot;</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">genre_tags</span><span class="p">),</span> <span class="s2">&quot;other&quot;</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">other_tags</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h2 id="tracks">Tracks</h2>
<p>Subclasses of the <code>Track</code> class have 16 abstract methods to be implemented, but 14 of those methods are simple getters or setters.
The two primary abstract methods are, again, <code>__init__</code> and <code>serialize</code>.</p>
<p>The requirements for a <code>Track</code> subclass' initialization are only that it parses from the input object the dozen or so attributes that the other abstract methods either get or set:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.tracks.Track.__init__"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/tracks.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;Deserializes a track from the native format of a DJ software.&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>A <code>Track</code> subclass must implement a <code>serialize</code> which returns an exact match of the input object used with <code>__init__</code>. In other words, it must be the case that <code>input == Track(input).serialize()</code>:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.tracks.Track.serialize"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/tracks.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializes a track into the native format of a DJ software.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A serialized track of the same type used to initialize Track.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>Let's not enumerate the many getter and setters of the <code>Track</code> object here, but you can check them out for yourself:</p>


<div class="doc doc-object doc-class">



<a id="djtools.collection.tracks.Track"></a>
  <div class="doc doc-contents first">

  

            <details class="quote">
              <summary>Source code in <code>djtools/collection/tracks.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Track</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s2">&quot;Abstract base class for a track.&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="s2">&quot;Deserializes a track from the native format of a DJ software.&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_artists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track artists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string representing the track&#39;s artists.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_bpm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track BPM.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A float representing BPM.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track comments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string representing the track&#39;s comments.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_date_added</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track&#39;s date added.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A datetime representing the track&#39;s date added.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_genre_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the genre tags of the track.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of the track&#39;s genre tags.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The ID of this track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track key.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The key of this track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_label</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the track label.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The label of this track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the location of the track.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Path for the location of the track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the rating of the track.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The rating of the track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the tags of the track.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A set of the track&#39;s tags.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_year</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the year of the track.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The year of the track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serializes a track into the native format of a DJ software.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A serialized track of the same type used to initialize Track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">set_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the path of the track to location.</span>

<span class="sd">        Args:</span>
<span class="sd">            location: New location of the track.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">set_track_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the track number of a track.</span>

<span class="sd">        Args:</span>
<span class="sd">            number: Number to set for TrackNumber.</span>
<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><h2 id="playlists">Playlists</h2>
<p>A subclass of the <code>Playlist</code> class must implement five abstract methods for working with a recursive playlist structure.
Like the other components of a collection, the <code>Playlist</code> class also requires an <code>__init__</code> and <code>serialize</code> implementation.</p>
<p>The <code>__init__</code> method must take an input that's either a playlist folder or a playlist that contains tracks:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.Playlist.__init__"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;Deserializes a playlist from the native format of a DJ software.&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>As with <code>Track</code>, <code>Playlist</code> subclasses must implement a <code>serialize</code> which returns an exact match of the input object used with <code>__init__</code>. In other words, it must be the case that <code>input == Playlist(input).serialize()</code>:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.Playlist.serialize"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializes a playlist into the native format of a DJ software.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A serialized playlist of the same type used to initialized</span>
<span class="sd">            Playlist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><hr />
<p>The other abstract methods that must be implemented are:</p>
<p>The <code>get_name</code> and the <code>is_folder</code> methods are a simple getter and condition check:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.Playlist.get_name"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the name of this playlist.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The name of this playlist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.Playlist.is_folder"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">is_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns whether this playlist is a folder or a playlist of tracks.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Boolean representing whether this is a folder or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>A class method called <code>new_playlist</code> which can create a <code>Playlist</code> object from either a list of <code>Playlist</code> objects or a dictionary of <code>Track</code> objects:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.Playlist.new_playlist"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">new_playlist</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">playlists</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Playlist</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tracks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Track</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Playlist</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new Playlist.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name of the Playlist to be created.</span>
<span class="sd">        playlists: A list of Playlists to add to this Playlist.</span>
<span class="sd">        tracks: A dict of Tracks to add to this Playlist.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: You must provide either a list of Playlists or a list</span>
<span class="sd">            of Tracks.</span>
<span class="sd">        RuntimeError: You must not provide both a list of Playlists and a</span>
<span class="sd">            list of Tracks.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new Playlist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h2 id="appendix">Appendix</h2>
<h3 id="rekordbox-as-an-example">Rekordbox as an example</h3>
<h4 id="rekordboxcollection">RekordboxCollection</h4>
<p>Rekordbox supports exporting a collection to an XML file which contains two primary sections: a COLLECTION tag with TRACK tags, and a PLAYLISTS tag with NODE tags with either more NODE tags or TRACK tags that have a key referencing the COLLECTION TRACKS. A <a href="https://github.com/a-rich/DJ-Tools/blob/main/testing/data/rekordbox.xml">minimal example XML</a> can be seen in the test data.</p>
<p>The <code>RekordboxCollection</code> implements <code>__init__</code> by parsing the XML with BeautifulSoup, deserializing the tracks as a dictionary of <code>RekordboxTrack</code> objects, and deserializing the playlists into the root node of a <code>RekordboxPlaylist</code> tree:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.RekordboxCollection.__init__"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@make_path</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserializes a Collection from an XML file.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to a serialized collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="c1"># Parse the XML as a BeautifulSoup document.</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_file</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_collection</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">_file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="s2">&quot;xml&quot;</span><span class="p">)</span>

    <span class="c1"># Create a dict of tracks.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">track</span><span class="p">[</span><span class="s2">&quot;TrackID&quot;</span><span class="p">]:</span> <span class="n">RekordboxTrack</span><span class="p">(</span><span class="n">track</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;TRACK&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">track</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Location&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1"># Instantiate the Playlist(s) in this collection.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span> <span class="o">=</span> <span class="n">RekordboxPlaylist</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_collection</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;ROOT&quot;</span><span class="p">,</span> <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">}),</span>
        <span class="n">tracks</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>The <code>serialize</code> method of <code>RekordboxCollection</code> builds a new XML document, populates the COLLECTION tag by serializing the values of the <code>RekordboxTrack</code> dictionary, and then populates the PLAYLISTS tag by iterating the root <code>RekordboxPlaylist</code> and serializing its children:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.collections.RekordboxCollection.serialize"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/collections.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@make_path</span>
<span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializes this Collection as an XML file.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_path: Path to output serialized collection to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Path to the serialized collection XML file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># BeautifulSoup document.</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>

    <span class="c1"># Tag that contains all the playlist data.</span>
    <span class="n">root_tag_name</span> <span class="o">=</span> <span class="s2">&quot;DJ_PLAYLISTS&quot;</span>

    <span class="c1"># Retrieve this root tag from the existing document, rather than</span>
    <span class="c1"># building it from scratch, in case the attributes ever change.</span>
    <span class="n">root_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">root_tag_name</span><span class="p">,</span>
        <span class="n">attrs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">root_tag_name</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Similarly, we want to reference the existing attribute data on the</span>
    <span class="c1"># product Tag.</span>
    <span class="n">root_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
        <span class="p">[</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;PRODUCT&quot;</span><span class="p">))]</span>
    <span class="p">)</span>

    <span class="c1"># Build the collection Tag and serialize each track into it before</span>
    <span class="c1"># adding the collection Tag to the root.</span>
    <span class="n">collection_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;COLLECTION&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Entries&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span><span class="p">))}</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">collection_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">track</span><span class="o">.</span><span class="n">serialize</span><span class="p">()]</span>
        <span class="p">)</span>
    <span class="n">collection_tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="n">root_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">collection_tag</span><span class="p">])</span>

    <span class="c1"># Build the playlists Tag and serialize each Playlist into it before</span>
    <span class="c1"># adding the playlist Tag to the root.</span>
    <span class="n">playlists_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;PLAYLISTS&quot;</span><span class="p">)</span>
    <span class="n">playlists_root_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;NODE&quot;</span><span class="p">,</span>
        <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;ROOT&quot;</span><span class="p">,</span> <span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span><span class="p">)},</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">playlist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span><span class="p">:</span>
        <span class="n">playlists_root_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">playlist</span><span class="o">.</span><span class="n">serialize</span><span class="p">()]</span>
        <span class="p">)</span>
    <span class="n">playlists_root_tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="n">playlists_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span>
            <span class="n">playlists_root_tag</span><span class="p">,</span>
            <span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">root_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span>
            <span class="n">playlists_tag</span><span class="p">,</span>
            <span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">root_tag</span><span class="p">)</span>

    <span class="c1"># If no new path is provided, use the original.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output_path</span><span class="p">:</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>

    <span class="c1"># Write the serialized Collection to a new file.</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_file</span><span class="p">:</span>
        <span class="n">_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">prettify</span><span class="p">(</span>
                <span class="c1"># UnsortedAttributes formatter ensures attributes are</span>
                <span class="c1"># serialized in the same order as the original XML file.</span>
                <span class="n">formatter</span><span class="o">=</span><span class="n">UnsortedAttributes</span><span class="p">(</span>
                    <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                    <span class="c1"># CustomSubstitution is used to substitute an expanded</span>
                    <span class="c1"># character set in the serialized XML file.</span>
                    <span class="n">entity_substitution</span><span class="o">=</span><span class="n">CustomSubstitution</span><span class="o">.</span><span class="n">substitute_xml</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">output_path</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h4 id="rekordboxtrack">RekordboxTrack</h4>
<p>A track in an XML contains all the information about tracks except for what playlists they belong to. This information is stored directly in the attributes of the TRACK tag with the exception of the beat grid and hot cue data which are represented as sub-tags TEMPO and POSITION_MARK, respectively.</p>
<p>The <code>RekordboxTrack</code> implements <code>__init__</code> by enumerating the attributes of the input Track tag and deserializing the string values as types that are more useful in Python, such as <code>datetime</code> objects, <code>lists</code>, <code>sets</code>, and numerical values:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.tracks.RekordboxTrack.__init__"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/tracks.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">track</span><span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize a track from a BeautifulSoup TRACK Tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        track: BeautifulSoup Tag representing a track.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Prefix of the path to the audio file corresponding to this track.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__location_prefix</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;file://localhost&quot;</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;posix&quot;</span> <span class="k">else</span> <span class="s2">&quot;file://localhost/&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Set class attributes from TRACK Tag attributes.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">track</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s2">&quot;BitRate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DiscNumber&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PlayCount&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SampleRate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Size&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TotalTime&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TrackNumber&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;AverageBpm&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;DateAdded&quot;</span><span class="p">:</span>
            <span class="c1"># We need to keep the original date added string because</span>
            <span class="c1"># Rekordbox doesn&#39;t format date strings consistently i.e.</span>
            <span class="c1"># ensuring perfect serialization symmetry is not possible</span>
            <span class="c1"># without this.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__original_date_added</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;Genre&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;Location&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">unquote</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__location_prefix</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;Rating&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;51&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;102&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;153&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;204&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;255&quot;</span><span class="p">:</span> <span class="mi">5</span>
            <span class="p">}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="c1"># Parse MyTag data from Comments attribute.</span>
    <span class="n">my_tags</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?&lt;=\/\*).*(?=\*\/)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Comments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_MyTags</span> <span class="o">=</span> <span class="p">(</span>  <span class="c1"># pylint: disable=invalid-name</span>
        <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">my_tags</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)]</span> <span class="k">if</span> <span class="n">my_tags</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="p">)</span>

    <span class="c1"># Merge Genre and MyTag data into a new attribute.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_Tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Genre</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MyTags</span><span class="p">)</span>  <span class="c1"># pylint: disable=invalid-name</span>

    <span class="c1"># Parse TEMPO Tags as the beat grid attribute.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_beat_grid</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;TEMPO&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_beat_grid</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_beat_grid</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="o">.</span><span class="n">attrs</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_beat_grid</span><span class="p">]</span>

    <span class="c1"># Parse POSITION_MARK Tags as the hot cues attribute.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hot_cues</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;POSITION_MARK&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hot_cues</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hot_cues</span> <span class="o">=</span> <span class="p">[</span><span class="n">hot_cue</span><span class="o">.</span><span class="n">attrs</span> <span class="k">for</span> <span class="n">hot_cue</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hot_cues</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>The <code>serialize</code> method of <code>RekordboxTrack</code> builds a new XML tag for a TRACK and populates the attributes of that tag using the <code>RekordboxTrack</code> members. Because Rekordbox serializes TRACK tags inside of the PLAYLISTS differently, this method accepts a parameter to indicate that the <code>RekordboxTrack</code> should serialize containing only its ID:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.tracks.RekordboxTrack.serialize"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/tracks.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">playlist</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializes this track as a BeautifulSoup TRACK Tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        playlist: Whether or not to serialize this track as a member of a</span>
<span class="sd">            playlist.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The DateAdded attribute must serialize into its</span>
<span class="sd">            original format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        BeautifulSoup Tag representing this track.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># BeautifulSoup Tag to populate with attributes of this track.</span>
    <span class="n">track_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;TRACK&quot;</span><span class="p">,</span> <span class="n">can_be_empty_element</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># TRACK Tags in playlists are serialized differently from top-level</span>
    <span class="c1"># TRACK Tags.</span>
    <span class="k">if</span> <span class="n">playlist</span><span class="p">:</span>
        <span class="n">track_tag</span><span class="p">[</span><span class="s2">&quot;Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">track_tag</span>

    <span class="c1"># Dunder members aren&#39;t serialized. Public members (i.e. methods)</span>
    <span class="c1"># aren&#39;t serialized either.</span>
    <span class="n">serialize_attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>  <span class="c1"># pylint: disable=duplicate-code</span>
            <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;_MyTags&quot;</span><span class="p">,</span> <span class="s2">&quot;_Tags&quot;</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="c1"># Serialize attributes into a TRACK Tag.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">serialize_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># Beat grid and hot cue data is serialized as TEMPO and</span>
        <span class="c1"># POSITION_MARK Tags, respectively.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;beat_grid&quot;</span><span class="p">,</span> <span class="s2">&quot;hot_cues&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;POSITION_MARK&quot;</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;hot_cues&quot;</span> <span class="k">else</span> <span class="s2">&quot;TEMPO&quot;</span><span class="p">,</span>
                    <span class="n">can_be_empty_element</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">tag</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">val</span>
                <span class="n">track_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">tag</span><span class="p">])</span>
            <span class="k">continue</span>

        <span class="c1"># Cast integers back into a string.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s2">&quot;BitRate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DiscNumber&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PlayCount&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SampleRate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Size&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TotalTime&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TrackNumber&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># Increase BPM precision to make serialization 100% symmetrical.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;AverageBpm&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">0,.2f</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Truncate the HH:MM:SS part of the datetime.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="c1"># Rekordbox doesn&#39;t consistently format dates with or without</span>
            <span class="c1"># leading zeros on the month and day portion of the date</span>
            <span class="c1"># string, so we have to try all three of these formats to see</span>
            <span class="c1"># if the resulting formatting matches the original one.</span>
            <span class="n">date_formats</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">(</span><span class="s2">&quot;%Y-%-m-</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;posix&quot;</span> <span class="k">else</span> <span class="s2">&quot;%Y-%#m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;%Y-%-m-</span><span class="si">%-d</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;posix&quot;</span> <span class="k">else</span> <span class="s2">&quot;%Y-%#m-</span><span class="si">%#d</span><span class="s2">&quot;</span><span class="p">),</span>
            <span class="p">]</span>
            <span class="k">for</span> <span class="n">date_format</span> <span class="ow">in</span> <span class="n">date_formats</span><span class="p">:</span>
                <span class="n">attempt</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">attempt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__original_date_added</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">attempt</span>

            <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__original_date_added</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>  <span class="c1"># pragma: no cover</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to serialize the datetime </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> into its &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;original format </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__original_date_added</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Re-join genre tags with forward slashes.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;Genre&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot; / &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># Re-insert the location prefix and quote the path.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;Location&quot;</span><span class="p">:</span>
            <span class="n">track_path</span> <span class="o">=</span> <span class="n">quote</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="n">safe</span><span class="o">=</span><span class="s2">&quot;/,()!+=#;$:&quot;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__location_prefix</span><span class="si">}{</span><span class="n">track_path</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                <span class="sa">r</span><span class="s1">&#39;%[0-9A-Z]</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">value</span>
            <span class="p">)</span>

        <span class="c1"># Reverse the rating value to the range recognized by Rekordbox.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;Rating&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">{</span>
                <span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;51&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;102&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;153&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;204&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;255&quot;</span>
            <span class="p">}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># Otherwise the data is serialized as TRACK Tag attributes.</span>
        <span class="n">track_tag</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># If this TRACK Tag has children, append a final newline character.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">track_tag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">track_tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">track_tag</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><h4 id="rekordboxplaylist">RekordboxPlaylist</h4>
<p>A playlist in an XML is a NODE tag which is a recursive structure that contains other NODE tags. The leaves of this tree are NODE tags which contain only TRACK tags with just a single attribute, KEY, which maps to the TrackID attribute of the TRACK tags under the COLLECTION tag.</p>
<p>NODE tags also have attributes for the Name and Type (folder or not) and either a Count or an Entries attribute which has the number of playlists or number of tracks, respectively.</p>
<p>The <code>__init__</code> method deserializes a NODE tag by either recursively deserializing its children NODE tags (if it's a folder) or else creating a dictionary of tracks from <code>RekordboxCollection</code> object's tracks passed as a parameter:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.RekordboxPlaylist.__init__"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">playlist</span><span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">,</span>
    <span class="n">tracks</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RekordboxTrack</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">playlist_tracks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RekordboxTrack</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RekordboxPlaylist</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize a Playlist from a BeautifulSoup NODE Tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        playlist: BeautifulSoup Tag representing a playlist.</span>
<span class="sd">        tracks: All the tracks in this collection.</span>
<span class="sd">        playlist_tracks: Tracks to set when initializing with new_playlist.</span>
<span class="sd">        parent: The folder this playlist is in.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">tracks</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="c1"># Set this object&#39;s attributes with the NODE Tag&#39;s attributes.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">playlist</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="c1"># Recursively instantiate sub-playlists.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_folder</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_playlists</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">RekordboxPlaylist</span><span class="p">(</span><span class="n">playlist</span><span class="p">,</span> <span class="n">tracks</span><span class="o">=</span><span class="n">tracks</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">playlist</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">),</span> <span class="n">playlist</span><span class="o">.</span><span class="n">children</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="c1"># Deserialize tracks from a leaf node playlist.</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Filter the children elements for Tags and get the key attribute.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">playlist_tracks</span><span class="p">:</span>
            <span class="n">playlist_tracks</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">track</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span>
                    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">),</span>
                    <span class="n">playlist</span><span class="o">.</span><span class="n">children</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="c1"># Create a dict of tracks.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tracks</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">track_id</span><span class="p">:</span> <span class="n">tracks</span><span class="p">[</span><span class="n">track_id</span><span class="p">]</span> <span class="k">for</span> <span class="n">track_id</span> <span class="ow">in</span> <span class="n">playlist_tracks</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>The <code>new_playlist</code> method creates a new Node tag and deserializes it as a <code>RekordboxPlaylist</code> before setting its members with either a <code>RekordboxTrack</code> dictionary or a list of <code>RekordboxPlaylist</code> objects:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.RekordboxPlaylist.new_playlist"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">new_playlist</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">playlists</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">RekordboxPlaylist</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tracks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RekordboxTrack</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RekordboxPlaylist</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new playlist.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name of the Playlist to be created.</span>
<span class="sd">        playlists: A list of Playlists to add to this Playlist.</span>
<span class="sd">        tracks: A dict of Tracks to add to this Playlist.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: You must provide either a list of Playlists or a list</span>
<span class="sd">            of Tracks.</span>
<span class="sd">        RuntimeError: You must not provide both a list of Playlists and a</span>
<span class="sd">            list of Tracks.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new playlist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">playlists</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">tracks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;You must provide either a list of RekordboxPlaylists or a &quot;</span>
            <span class="s2">&quot;list of RekordboxTracks&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">playlists</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">tracks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;You must not provide both a list of RekordboxPlaylists and a &quot;</span>
            <span class="s2">&quot;list of RekordboxTracks&quot;</span>
        <span class="p">)</span>
    <span class="n">playlist_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;NODE&quot;</span><span class="p">,</span>
        <span class="n">attrs</span><span class="o">=</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">playlists</span><span class="p">)}</span>
        <span class="k">if</span> <span class="n">playlists</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;KeyType&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">tracks</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">playlist</span> <span class="o">=</span> <span class="n">RekordboxPlaylist</span><span class="p">(</span>
        <span class="n">playlist_tag</span><span class="p">,</span> <span class="n">tracks</span><span class="o">=</span><span class="n">tracks</span><span class="p">,</span> <span class="n">playlist_tracks</span><span class="o">=</span><span class="p">(</span><span class="n">tracks</span> <span class="ow">or</span> <span class="p">{})</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">playlist</span><span class="o">.</span><span class="n">_playlists</span> <span class="o">=</span> <span class="n">playlists</span>

    <span class="k">return</span> <span class="n">playlist</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div><p>The <code>serialize</code> method of <code>RekordboxPlaylist</code> builds a new XML tag for a NODE and populates the attributes and sub-tags recursively:</p>



<div class="doc doc-object doc-function">



<a id="djtools.collection.playlists.RekordboxPlaylist.serialize"></a>
  <div class="doc doc-contents first">
  

          <details class="quote">
            <summary>Source code in <code>djtools/collection/playlists.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializes this playlist as a BeautifulSoup NODE Tag.</span>

<span class="sd">    Returns:</span>
<span class="sd">        BeautifulSoup Tag representing this playlist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># BeautifulSoup Tag to populate with attributes of this playlist.</span>
    <span class="n">playlist_tag</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="n">can_be_empty_element</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Dunder members aren&#39;t serialized. Public members (i.e. methods)</span>
    <span class="c1"># aren&#39;t serialized either.</span>
    <span class="n">serialize_attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;_parent&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="c1"># Serialize attributes into a NODE Tag.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">serialize_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># Playlists and tracks are serialized as nested Tag objects.</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;playlists&quot;</span><span class="p">,</span> <span class="s2">&quot;tracks&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Iterate and serialize nested playlists.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_folder</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">playlist_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">val</span><span class="o">.</span><span class="n">serialize</span><span class="p">()]</span>
                    <span class="p">)</span>
            <span class="c1"># Iterate and serialize tracks.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="n">playlist_tag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span>
                            <span class="n">val</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">playlist</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                        <span class="p">]</span>
                    <span class="p">)</span>

            <span class="c1"># Append a final newline character.</span>
            <span class="n">playlist_tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bs4</span><span class="o">.</span><span class="n">NavigableString</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="k">continue</span>

        <span class="c1"># Otherwise the data is serialized as NODE Tag attributes.</span>
        <span class="n">playlist_tag</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># Update the Count or Entries attribute.</span>
    <span class="n">playlist_tag</span><span class="p">[</span><span class="s2">&quot;Count&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_folder</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;Entries&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">playlist_tag</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>